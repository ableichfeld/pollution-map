<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Air Pollution in Massachusetts</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <link rel="stylesheet" href="style.css"/>
  </head>
  <body>
    <div id="contentContainer">
      <div id="mapid"></div>
      <div id="drawitContainer">
        <h2>Concentrations of NO<sub>2</sub> decreased following the start of pandemic lockdowns</h2>
        <p class="introText">Select a city from the map to explore how COVID-19 lockdowns affected air pollution in the local area.</p>
        <div id="drawit"></div>
      </div>
    </div>
    <div id="filler"></div>

    <script>

      var mymap = L.map('mapid', {scrollWheelZoom:false}).setView([42.1321289,-71.8349482], 8);
      //Adjust so zoom level can be 8.5?
      //Also, make it so the map can't zoom in/out?
      L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        //Change so it's not a mercator projection? Different tile layer.
        maxZoom: 18,
        id: 'mapbox/streets-v11',
        tileSize: 512,
        zoomOffset: -1,
        accessToken: 'pk.eyJ1IjoiYWJsZWljaGZlbGQiLCJhIjoiY2p1azZ3dGoxMXN2ZjQ1bzI0Z3U5aDFqZCJ9.aprixnlrY_kPCaj-4H3XSw'
      }).addTo(mymap);

      var chelmsford = L.marker([42.612085, -71.306986]).addTo(mymap).bindTooltip("<p>Chelmsford, MA</p>");
      var chicopee = L.marker([42.19438, -72.555112]).addTo(mymap).bindTooltip("<p>Chicopee, MA</p>");
      var fenwayKenmore = L.marker([42.348873, -71.097163]).addTo(mymap).bindTooltip("<p>Fenway, Boston, MA</p>");
      var lynn = L.marker([42.474642, -70.970816]).addTo(mymap).bindTooltip("<p>Lynn, MA</p>");
      var milton = L.marker([42.211774, -71.11397]).addTo(mymap).bindTooltip("<p>Milton, MA</p>");
      var dudleySq = L.marker([42.3295, -71.0826]).addTo(mymap).bindTooltip("<p>Roxbury, Boston, MA</p>");
      var springfield = L.marker([42.120229, -72.584503]).addTo(mymap).bindTooltip("<p>Springfield, MA</p>");
      var ware = L.marker([42.298493, -72.334079]).addTo(mymap).bindTooltip("<p>Ware, MA</p>");
      var worcester = L.marker([42.263955, -71.794322]).addTo(mymap).bindTooltip("<p>Worcester, MA</p>");

      var stations = L.layerGroup([chelmsford, chicopee, fenwayKenmore, lynn, milton, dudleySq, springfield, ware, worcester]);

      chelmsford.on('click', function(bostonDrawit){
        document.getElementById('drawit').innerHTML = '<iframe src="https://drawit.mucollective.co/vis/v1bjfw3wKKYOuAbYvNj7aYgz30E3/-MWm2pzGQcwsySZu5Vg5" width="700" height="500"></iframe>'
      });

      chicopee.on('click', function(bostonDrawit){
        document.getElementById('drawit').innerHTML = '<iframe src="https://drawit.mucollective.co/vis/v1bjfw3wKKYOuAbYvNj7aYgz30E3/-MWqyXGXazNC8hsE-Y5O" width="700" height="500"></iframe>'
      });

      fenwayKenmore.on('click', function(bostonDrawit){
        document.getElementById('drawit').innerHTML = '<iframe src="https://drawit.mucollective.co/vis/v1bjfw3wKKYOuAbYvNj7aYgz30E3/-MWm2pzGQcwsySZu5Vg5" width="700" height="500"></iframe>'
      });

      milton.on('click', function(bostonDrawit){
        document.getElementById('drawit').innerHTML = '<iframe src="https://drawit.mucollective.co/vis/v1bjfw3wKKYOuAbYvNj7aYgz30E3/-MWqzd9qAv2aVGoiMNqn" width="700" height="500"></iframe>'
      });

      dudleySq.on('click', function(bostonDrawit){
        document.getElementById('drawit').innerHTML = '<iframe src="https://drawit.mucollective.co/vis/v1bjfw3wKKYOuAbYvNj7aYgz30E3/-MWZlYC2bXcvEMk5fyTZ" width="700" height="500"> </iframe>'
      });

      springfield.on('click', function(bostonDrawit){
        document.getElementById('drawit').innerHTML = '<iframe src="https://drawit.mucollective.co/vis/v1bjfw3wKKYOuAbYvNj7aYgz30E3/-MWr0S1b302WF1ZJEUXG" width="700" height="500"></iframe>'
      });

      ware.on('click', function(bostonDrawit){
        document.getElementById('drawit').innerHTML = '<iframe src="https://drawit.mucollective.co/vis/v1bjfw3wKKYOuAbYvNj7aYgz30E3/-MWr1632TJw4ya2oLnh4" width="700" height="500"></iframe>'
      });

      worcester.on('click', function(bostonDrawit){
        document.getElementById('drawit').innerHTML = '<iframe src="https://drawit.mucollective.co/vis/v1bjfw3wKKYOuAbYvNj7aYgz30E3/-MWr23vqWgNqqqjA-Nmc" width="700" height="500"></iframe>'
      });

    </script>

  </body>
</html>
